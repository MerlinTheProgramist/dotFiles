#!/usr/bin/env sh
set -o errexit -o nounset

ins="yay -S --noconfirm --needed"

build() {
  PKG_URL="https://aur.archlinux.org/cgit/aur.git/snapshot/$1.tar.gz"
  PKG_NAME="${PKG_URL##*/}" # e.g yay.tar.gz
  PKG="${PKG_NAME%%.*}" # e.g yay
  BUILD_DIR="$HOME/build/$PKG"
  [ -d "$BUILD_DIR" ] || mkdir -p "$BUILD_DIR"
  [ -d "$BUILD_DIR" ] && rm -rf "$BUILD_DIR"/*
  ( cd "$BUILD_DIR" \
    && curl -o "$PKG_NAME" -L "$PKG_URL" \
    && tar xvf "$PKG_NAME" \
    && cd "$PKG" \
    && makepkg -si --noconfirm
  )
}

pkgs="
helix 
xorg-xinit 
xorg-server
i3-gaps
i3-status
rofi
pulseaudio  
xclip 
wget
feh 
scrot
mpv 
pinta
openssh 
youtube-dl
papirus-icon-theme 
mpc 
lightdm 
lightdm-gtk-greeter
inotify-tools 
unzip 
arc-gtk-theme 
ffmpegthumbnailer
xfce4-terminal
xss-lock
nerd-fonts-complete
brave
"

main() {
  sudo pacman -Syu yay-bin
  sudo $ins $pkgs
  
  sudo pacman -Syy
  exit 0
}

main "$@"